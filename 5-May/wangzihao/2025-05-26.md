## **Task Log**
```r
author: "Wangdali2049"
date: "2025-05-26"
```
---

## **Task List**

#### 1.Beat-AML数据库下载整理（victory！）
#### 2.Beat-AML数据[[#^37619d |批次矫正]]、靶点分析（victory！）

#### 3.Beat-AML项目文献阅读（victory！）
---

## **Details**
### **Task Name: [Beat-AML数据去批次矫正]**

#### **Step**

- [先把Venetoclax药敏数据按照AUC排序，取前后20%作为耐药和敏感组]
- [CPM保留二分之一样本中表达大于1的样本，再筛选在耐药和敏感组中的样本]
- [先用sva估算隐变量，再进行去批次矫正]

#### **Issues Encountered**

- **Issue 1:**  
    [SVs值估计没有确切方法，难以判断是否导致模型过拟合或者数据过矫正]
- **Issue 2:**  
    [文献方法中的fsva()源代码存在逻辑错误]
#### **Solutions**

- **Solution 1:**  
    - [通过对比矫正前后的PCA图变化，以及主成分1、2的变化，判断矫正效果；]
    - [通过对比矫正前后整体logfc以及差异基因的变化趋势来判断是否过矫正。正常情况下矫正后logfc范围和差异基因数量会适度会变小，但若差异基因数量大量减少，提示把真正的生物学变量给”吃掉了“]
    - [通过计算SVs与生物变量的相关性，判断估计的SVs中是否包含了生物变量；]
    - [通过观察与生物学变量强相关的marker，比如文献中Venetoclax耐药中MCL1上调等。这些marker主要受生物学变量影响，受技术变量影响较少。所以这些marker在批次矫正过程中变化幅度应该不会很大]
    
- **Solution 2:**  
    - [对函数中要求的newdata提供一个虚拟数据集，让函数能够正常run下去，得到矫正后的矩阵。经测试，矫正结果与将SVs加入removeBatchEffect中得到的结果矩阵一致。]